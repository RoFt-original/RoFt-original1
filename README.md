# TGradish Sticker Maker

Графическая утилита на Python, которая использует `tgradish`, `ffmpeg` и `rembg` для
создания Telegram стикеров (`.webm`) из видео, изображений и GIF-файлов с
прозрачным фоном.

## Возможности

- Удаление фона (для изображений и видео) с помощью `rembg`.
- Поддержка видео, изображений и GIF-файлов.
- Конвертация в формат стикеров Telegram через `tgradish` и `ffmpeg`.
- Настраиваемые параметры качества: масштабирование, длительность, FPS, битрейт, CRF.
- Удобный интерфейс на `tkinter`, пригодный для упаковки в автономный `.exe` файл.

## Требования

- Python 3.10 или новее.
- Установленные `ffmpeg` и `ffprobe` (должны находиться в `PATH`).
- Зависимости из `requirements.txt`.

Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск приложения

```bash
python -m sticker_maker
```

## Создание автономного `.exe`

### Быстрая сборка на Windows

В репозитории есть скрипт `scripts/build_windows_exe.ps1`, который автоматизирует
установку зависимостей, запуск PyInstaller и скачивание `ffmpeg/ffprobe`
(требуется PowerShell 7 / `pwsh`):

```powershell
pwsh ./scripts/build_windows_exe.ps1
```

В результате появится архив `tg-sticker-maker-windows.zip`, содержащий готовый
`tg-sticker-maker.exe` и необходимые бинарники FFmpeg.

### Ручная сборка

1. Установите `pyinstaller` и зависимости проекта:
   ```bash
   pip install -r requirements.txt
   pip install pyinstaller
   ```
2. Соберите проект при помощи подготовленного spec-файла:
   ```bash
   pyinstaller tg-sticker-maker.spec --noconfirm
   ```
3. Поместите `ffmpeg.exe` и `ffprobe.exe` рядом с `dist/tg-sticker-maker.exe`
   (либо добавьте FFmpeg в `PATH`).
4. По желанию упакуйте файлы в архив и распространите пользователям.

PyInstaller автоматически добавляет модели `rembg` и компоненты `tgradish`, поэтому
приложение работает офлайн сразу после сборки.

### Автоматическая сборка в GitHub Actions

Запустите workflow **Build Windows EXE** (доступен по `workflow_dispatch` или при
публикации тэгов `v*`). Он соберёт проект на `windows-latest`, скачает FFmpeg и
прикрепит готовый архив как artifact.

## Использование

1. Запустите приложение и выберите исходный файл.
2. Укажите путь для сохранения стикера (по умолчанию используется имя исходника с
   расширением `.webm`).
3. При необходимости настройте параметры качества и фон.
4. Нажмите «Создать стикер» и дождитесь завершения процесса.

Логи процесса отображаются в нижней части окна. Итоговый файл будет иметь прозрачный фон
и соответствовать ограничению Telegram по размеру стикеров.
